<div class="alerta-desercion-container">
  <div class="header">
    <h2>Alerta de Deserción</h2>
    <p class="subtitle">Seguimiento de estudiantes en riesgo de deserción</p>
  </div>

  <div class="loading-container" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Cargando reportes...</p>
  </div>

  <div class="table-container" *ngIf="!isLoading">
    <table class="reportes-table">
      <thead>
        <tr>
          <th>Fecha de Reporte</th>
          <th>Nombre del Estudiante</th>
          <th>Matrícula</th>
          <th>Carrera</th>
          <th>Estatus</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let reporte of reportes">
          <td>{{ reporte.fecha }}</td>
          <td class="estudiante-nombre">{{ reporte.estudiante }}</td>
          <td class="matricula">{{ reporte.matricula }}</td>
          <td class="carrera">{{ reporte.carrera }}</td>
          <td>
            <span class="estatus-badge" [ngClass]="getEstatusClass(reporte.estatus)">
              {{ reporte.estatus }}
            </span>
          </td>
          <td>
            <div class="acciones">
              <button class="action-btn view-btn" (click)="verInformacion(reporte)" title="Ver información">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
              <button class="action-btn report-btn" (click)="generarInforme(reporte)" title="Generar informe">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                  <polyline points="14 2 14 8 20 8"></polyline>
                  <line x1="16" y1="13" x2="8" y2="13"></line>
                  <line x1="16" y1="17" x2="8" y2="17"></line>
                  <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="empty-state" *ngIf="reportes.length === 0">
      <p>No hay reportes de deserción registrados</p>
    </div>
  </div>
</div>
